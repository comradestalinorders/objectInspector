<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">
	
	<h:form>
		<rich:modalPanel domElementAttachment="form" 
						 moveable="true"
						 width="#{xBean.width}"
						 height="#{xBean.height}" id="#{xBean.sendEmailModalId}"
						>
				<f:facet name="header">
					<h:outputText id="modalCaption" value="Email" />
				</f:facet>
				<f:facet name="controls">
		            <h:panelGrid >
		            	<h:commandButton style="height:16px; width:16px; margin-top:-4px;" action="#{xBean.hide}"  image="/images/close.png" value="closebtn" />
		            </h:panelGrid>
		        </f:facet>
		        <!-- Контроли -->
		        <h:panelGrid columns="2">
		        	<h:selectBooleanCheckbox value="#{xBean.joinErrors}" />
		        	<h:outputText value=" Включване на грешки към е-mail" />
		        </h:panelGrid>
		        <div style="height: 100px; padding-left:10px; overflow-y:scroll; ">
					<h:outputText value="#{xBean.modalDialog.errMsg}"  escape="false"/>
				</div>
		        <!-- text message area -->
		        <h:inputTextarea style="width:100%; height:200px;" value="#{xBean.mailText}" />
		        <h:commandButton action="#{xBean.sendEmail}" value="#{xBean.btnModalSendText}" >
		        	<a4j:support event="click" oncomplete="Richfaces.hideModalPanel('#{xBean.sendEmailModalId}');"> </a4j:support>
		        </h:commandButton>
	   </rich:modalPanel>
	</h:form>
	
	<script type="text/javascript">
		showSendMailModal('#{xBean.sendEmailModalId}', #{xBean.rndrModalSendMail});
	</script>
	
</ui:composition>